<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:wk="http://code.google.com/p/wkhtmltopdf/outline"
    xmlns="http://www.w3.org/1999/xhtml">
    <xsl:output doctype-public="-//W3C//DTD XHTML 1.0 Strict//EN"
        doctype-system="http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"
        indent="yes"/>

    <xsl:template match="wk:outline">
        <html>
            <head>
                <title>Содержание</title>
                <style>
                    body
                    {
                        font-family: Georgia;
                        font-size: 28px;
                    }

                    .title
                    {
                        text-align: center;
                    }

                    .author
                    {
                        text-align: center;
                        font-size: 14px;
                    }

                    .toc
                    {
                        text-align: center;
                        font-size: 16px;

                        margin-top: 3cm;
                    }

                    .item
                    {
                        position: relative;

                        font-size: 100%;
                        border-bottom: 1px dotted #666;
                    }

                    .link
                    {
                        font-size: 20px;

                        text-decoration:none;
                        color: #098ace;
                    }

                    .num
                    {

                        position: absolute;
                        bottom: 0;
                        right: 0;

                        font-size: 13px;

                        color: #666;
                    }

                    li
                    {
                        list-style: none;
                    }

                    ul
                    {
                        padding-left: 0em;
                    }

                    ul ul
                    {
                        font-size: 80%;

                        padding-left: 1em;
                    }

                </style>
            </head>
            <body>
                <div class="title">
                    <xsl:apply-templates select="wk:item[@page=1]" mode='wk:title'/>
                </div>
                <div class="author">Вадим Макишвили</div>

                <div class="toc">
                    Содержание
                </div>
                <ul>
                    <xsl:apply-templates select="wk:item/wk:item"/>
                </ul>
            </body>
        </html>
    </xsl:template>

    <xsl:template match="wk:item" mode='wk:title'>
        <xsl:value-of select="@title"/>
    </xsl:template>

    <xsl:template match="wk:item">
        <li>
            <xsl:if test="@title!=''">
                <div class="item">
                    <a class="link">
                        <xsl:if test="@link">
                            <xsl:attribute name="href">
                                <xsl:value-of select="@link"/>
                            </xsl:attribute>
                        </xsl:if>
                        <xsl:if test="@backLink">
                            <xsl:attribute name="name">
                                <xsl:value-of select="@backLink"/>
                            </xsl:attribute>
                        </xsl:if>
                        <xsl:value-of select="@title"/>
                    </a>
                    <span class="num">
                        <xsl:value-of select="@page"/>
                    </span>
                </div>
            </xsl:if>
            <ul>
                <xsl:apply-templates select="wk:item"/>
            </ul>
        </li>
    </xsl:template>
</xsl:stylesheet>